@model Simone.ViewModels.Reportes.VentaDetalleVM
@using System.Globalization
@{
    ViewData["Title"] = $"Detalle de venta #{Model.VentaID}";
    ViewData["Description"] = "Gestión completa de la venta - Panel administrativo Neo Ágora.";
    var culture = new CultureInfo("es-EC");

    // Helpers
    string Safe(string? v) => string.IsNullOrWhiteSpace(v) ? "—" : v;
    string JoinNonEmpty(params string?[] xs) => string.Join(", ", xs.Where(s => !string.IsNullOrWhiteSpace(s)));

    // Banco: pretty name + icono
    string BankPretty(string? b)
    {
        if (string.IsNullOrWhiteSpace(b)) return "";
        var k = b.Trim().ToLowerInvariant();
        return k switch
        {
            "pichincha" => "Banco Pichincha",
            "guayaquil" => "Banco Guayaquil",
            "pacifico" => "Banco del Pacífico",
            "jep" => "Banco JEP",
            "produbanco" => "Produbanco",
            "bolivariano" => "Banco Bolivariano",
            "austro" => "Banco del Austro",
            "machala" => "Banco de Machala",
            _ => CultureInfo.CurrentCulture.TextInfo.ToTitleCase(b)
        };
    }

    string BankIcon(string? b)
    {
        if (string.IsNullOrWhiteSpace(b)) return "fa-building-columns";
        var k = b.Trim().ToLowerInvariant();
        return k switch
        {
            "pichincha" => "fa-landmark",
            "guayaquil" => "fa-piggy-bank",
            "pacifico" => "fa-water",
            _ => "fa-building-columns"
        };
    }

    // Direcciones
    var dirPerfil = string.IsNullOrWhiteSpace(Model.Direccion) ? null : Model.Direccion;
    var telPerfil = string.IsNullOrWhiteSpace(Model.Telefono) ? null : Model.Telefono;
    var ciudadPerf = string.IsNullOrWhiteSpace(Model.PerfilCiudad) ? null : Model.PerfilCiudad;
    var provPerf = string.IsNullOrWhiteSpace(Model.PerfilProvincia) ? null : Model.PerfilProvincia;
    var refPerf = string.IsNullOrWhiteSpace(Model.PerfilReferencia) ? null : Model.PerfilReferencia;

    var dirUsada = (Model.Direcciones ?? Enumerable.Empty<Simone.ViewModels.Reportes.DireccionVM>())
                    .Where(d => d.FechaRegistro <= Model.Fecha)
                    .OrderByDescending(d => d.FechaRegistro)
                    .FirstOrDefault()
                ?? (Model.Direcciones ?? Enumerable.Empty<Simone.ViewModels.Reportes.DireccionVM>())
                    .OrderByDescending(d => d.FechaRegistro)
                    .FirstOrDefault();

    var calleUsada = dirUsada?.Calle ?? dirPerfil;
    var ciudadUsada = string.IsNullOrWhiteSpace(dirUsada?.Ciudad) ? ciudadPerf : dirUsada!.Ciudad;
    var estadoUsado = string.IsNullOrWhiteSpace(dirUsada?.EstadoProvincia) ? provPerf : dirUsada!.EstadoProvincia;
    var cpUsado = string.IsNullOrWhiteSpace(dirUsada?.CodigoPostal) ? null : dirUsada!.CodigoPostal;
    var telUsado = string.IsNullOrWhiteSpace(dirUsada?.TelefonoContacto) ? telPerfil : dirUsada!.TelefonoContacto;
    var refUsada = string.IsNullOrWhiteSpace(refPerf) ? null : refPerf;

    var linea2Usada = JoinNonEmpty(ciudadUsada, estadoUsado) + (string.IsNullOrWhiteSpace(cpUsado) ? "" : $" ({cpUsado})");

    // Etiqueta envío
    var etiquetaEnvio = string.Join("\n", new[]
    {
        Model?.Nombre,
        string.IsNullOrWhiteSpace(Model.Cedula) ? null : $"CI: {Model.Cedula}",
        string.IsNullOrWhiteSpace(calleUsada) ? null : calleUsada,
        string.IsNullOrWhiteSpace(linea2Usada) ? null : linea2Usada,
        string.IsNullOrWhiteSpace(refUsada) ? null : $"Ref: {refUsada}",
        string.IsNullOrWhiteSpace(telUsado) ? null : $"Tel.: {telUsado}"
    }.Where(x => !string.IsNullOrWhiteSpace(x)));

    // Estado
    var estadoNorm = (Model.Estado ?? "").Trim().ToLowerInvariant();
    string estadoClase = estadoNorm.Contains("cancel") ? "badge-cancelled"
                        : estadoNorm.Equals("enviado") ? "badge-shipped"
                        : "badge-pending";

    var bancoNice = BankPretty(Model.Banco);
    var bancoIcon = BankIcon(Model.Banco);

    var showPago = !string.IsNullOrWhiteSpace(Model.Depositante)
                || !string.IsNullOrWhiteSpace(Model.ComprobanteUrl)
                || !string.IsNullOrWhiteSpace(Model.Banco)
                || (!string.IsNullOrWhiteSpace(Model.MetodoPago) && Model.MetodoPago.Contains("dep", StringComparison.OrdinalIgnoreCase));

    // Comprobante
    string? compUrl = null;
    if (!string.IsNullOrWhiteSpace(Model.ComprobanteUrl))
    {
        var raw = Model.ComprobanteUrl.Trim();
        compUrl = raw.StartsWith("http", StringComparison.OrdinalIgnoreCase)
            ? raw
            : Url.Content(raw.StartsWith("~/") || raw.StartsWith("/") ? raw : "~/" + raw);
    }
    bool isPdf = !string.IsNullOrWhiteSpace(compUrl) && compUrl!.EndsWith(".pdf", StringComparison.OrdinalIgnoreCase);

    var hasDepos = !string.IsNullOrWhiteSpace(Model.Depositante);
    var deposText = hasDepos ? Model.Depositante!.Trim() : "—";

    // WhatsApp
    string TelSoloDigitos(string? t) => new string((t ?? "").Where(char.IsDigit).ToArray());
    var telDigits = TelSoloDigitos(telUsado);
    var hasTel = !string.IsNullOrWhiteSpace(telDigits) && telDigits.Length >= 8;
    var whatsUrl = hasTel ? $"https://wa.me/{telDigits}?text={Uri.EscapeDataString($"Hola {Model.Nombre}, sobre tu compra #{Model.VentaID}")}" : null;

    // Maps
    string fullAddrForMaps = string.Join(", ", new[] { calleUsada, ciudadUsada, estadoUsado }.Where(s => !string.IsNullOrWhiteSpace(s)));
    var mapsUrl = string.IsNullOrWhiteSpace(fullAddrForMaps) ? null : $"https://www.google.com/maps/search/?api=1&query={Uri.EscapeDataString(fullAddrForMaps)}";

    // Back URL
    var backHref = Url.Action("Index", "MisCompras");
    if (User.IsInRole("Administrador"))
        backHref = Url.Content("~/Panel/Reportes");
    else if (User.IsInRole("Vendedor"))
        backHref = Url.Content("~/Vendedor/Reportes");

    var faltaCalle = string.IsNullOrWhiteSpace(calleUsada);
    var faltaCiudad = string.IsNullOrWhiteSpace(ciudadUsada);
}


<link rel="stylesheet" href="~/css/VentaDetalle.css" asp-append-version="true" />

}

<div class="admin-detail-page">
    <div class="admin-container">
        <!-- Breadcrumb -->
        <nav class="admin-breadcrumb no-print" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li>
                    <a href="@(User.IsInRole("Administrador") ? Url.Content("~/Panel") : Url.Content("~/Vendedor"))">
                        <i class="fa-solid fa-house"></i>
                        @(User.IsInRole("Administrador") ? "Panel Admin" : "Panel Vendedor")
                    </a>
                </li>
                <li>
                    <a href="@backHref">Compradores</a>
                </li>
                <li class="active" aria-current="page">Venta #@Model.VentaID</li>
            </ol>
        </nav>

        <!-- Page Header -->
        <div class="page-header">
            <div class="page-header-top">
                <div class="page-title-section">
                    <h1>
                        <i class="fa-solid fa-receipt"></i>
                        Venta #@Model.VentaID
                    </h1>
                    <p class="page-subtitle">
                        <i class="fa-solid fa-calendar-alt"></i>
                        @Model.Fecha.ToString("dd/MM/yyyy HH:mm")
                    </p>
                </div>
                <div class="header-actions no-print">
                    <button class="btn-action btn-outline-action" id="copyOrder">
                        <i class="fa-solid fa-copy"></i>
                        <span>Copiar #</span>
                    </button>
                    @if (!string.IsNullOrWhiteSpace(mapsUrl))
                    {
                        <a class="btn-action btn-outline-action" href="@mapsUrl" target="_blank" rel="noopener">
                            <i class="fa-solid fa-map-location-dot"></i>
                            <span>Maps</span>
                        </a>
                    }
                    @if (!string.IsNullOrWhiteSpace(whatsUrl))
                    {
                        <a class="btn-action btn-success-action" href="@whatsUrl" target="_blank" rel="noopener">
                            <i class="fa-brands fa-whatsapp"></i>
                            <span>WhatsApp</span>
                        </a>
                    }
                    <a class="btn-action btn-primary-action" href="@backHref">
                        <i class="fa-solid fa-arrow-left"></i>
                        <span>Volver</span>
                    </a>
                </div>
            </div>

            <!-- Status Badge -->
            <div>
                <span class="status-badge @estadoClase">
                    <i class="fa-solid @(estadoClase == "badge-shipped" ? "fa-check-circle" : estadoClase == "badge-cancelled" ? "fa-times-circle" : "fa-clock")"></i>
                    <span>@Safe(Model.Estado)</span>
                </span>
            </div>
        </div>

        <div class="row g-4">
            <!-- Cliente -->
            <div class="col-lg-4">
                <div class="info-card">
                    <h2 class="info-card-title">
                        <i class="fa-solid fa-user-circle"></i>
                        Cliente
                    </h2>

                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Nombre</span>
                            <span class="info-value">@Safe(Model.Nombre)</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Cédula</span>
                            <span class="info-value">@Safe(Model.Cedula)</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Email</span>
                            <div class="d-flex align-items-center gap-2">
                                <span class="info-value">@Safe(Model.Email)</span>
                                @if (!string.IsNullOrWhiteSpace(Model.Email))
                                {
                                    <a class="btn-chip no-print" href="mailto:@Model.Email" title="Enviar email">
                                        <i class="fa-solid fa-envelope"></i>
                                    </a>
                                    <button class="btn-chip no-print" data-copy="@Model.Email" title="Copiar">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                }
                            </div>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Teléfono</span>
                            <div class="d-flex align-items-center gap-2">
                                <span class="info-value">@Safe(Model.Telefono)</span>
                                @if (hasTel)
                                {
                                    <a class="btn-chip no-print" href="tel:@telDigits" title="Llamar">
                                        <i class="fa-solid fa-phone"></i>
                                    </a>
                                    <button class="btn-chip no-print" data-copy="@telDigits" title="Copiar">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                }
                            </div>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Método de Pago</span>
                            <span class="info-value">@Safe(Model.MetodoPago)</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Total</span>
                            <span class="info-value" style="color: var(--admin-primary); font-size: 1.5rem;">
                                @Model.Total.ToString("C", culture)
                            </span>
                        </div>
                    </div>

                    <div class="mt-4 no-print">
                        <button type="button"
                                class="btn-action btn-success-action w-100 mb-3"
                                id="btnMarkShipped"
                                data-bs-toggle="modal"
                                data-bs-target="#modalMarcarEnviado"
                                @(estadoClase == "badge-shipped" || estadoClase == "badge-cancelled" ? "disabled" : null)>
                            <i class="fa-solid fa-truck-fast"></i>
                            <span>Marcar como enviado</span>
                        </button>

                        <button type="button"
                                class="btn-action btn-danger-action w-100"
                                data-bs-toggle="modal"
                                data-bs-target="#modalReportar"
                                @(estadoClase == "badge-cancelled" ? "disabled" : null)>
                            <i class="fa-solid fa-flag"></i>
                            <span>Reportar Venta</span>
                        </button>
                    </div>
                </div>

                <!-- Pago -->
                @if (showPago)
                {
                    <div class="info-card">
                        <h2 class="info-card-title">
                            <i class="fa-solid fa-receipt"></i>
                            Pago / Depósito
                        </h2>

                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Depositante</span>
                                <div class="d-flex align-items-center gap-2">
                                    <span class="info-value" id="depositanteText">@deposText</span>
                                    @if (hasDepos)
                                    {
                                        <button class="btn-chip no-print" id="copyDepositante" title="Copiar">
                                            <i class="fa-solid fa-copy"></i>
                                        </button>
                                    }
                                </div>
                            </div>

                            <div class="info-item">
                                <span class="info-label">Banco</span>
                                <div class="d-flex align-items-center gap-2">
                                    <i class="fa-solid @bancoIcon" style="color: var(--admin-primary);"></i>
                                    <span class="info-value">@Safe(bancoNice)</span>
                                    @if (!string.IsNullOrWhiteSpace(bancoNice))
                                    {
                                        <button class="btn-chip no-print" data-copy="@bancoNice" title="Copiar">
                                            <i class="fa-solid fa-copy"></i>
                                        </button>
                                    }
                                </div>
                            </div>
                        </div>

                        @if (!string.IsNullOrWhiteSpace(compUrl))
                        {
                            <div class="mt-3 text-center">
                                @if (isPdf)
                                {
                                    <a class="file-pill" href="@compUrl" target="_blank" rel="noopener">
                                        <i class="fa-solid fa-file-pdf"></i>
                                        Ver comprobante PDF
                                    </a>
                                    <div class="mt-3 no-print">
                                        <a class="btn-action btn-outline-action" href="@compUrl" download>
                                            <i class="fa-solid fa-download"></i>
                                            Descargar
                                        </a>
                                    </div>
                                }
                                else
                                {
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#modalComprobante">
                                        <img src="@compUrl" alt="Comprobante" class="deposit-proof" />
                                    </a>
                                    <div class="text-muted mt-2"><small>Click para ampliar</small></div>
                                    <div class="mt-3 no-print">
                                        <a class="btn-action btn-outline-action" href="@compUrl" download>
                                            <i class="fa-solid fa-download"></i>
                                            Descargar
                                        </a>
                                    </div>
                                }
                            </div>
                        }
                        else
                        {
                            <div class="alert-warning">
                                <i class="fa-solid fa-exclamation-circle"></i>
                                <span>No se adjuntó comprobante</span>
                            </div>
                        }
                    </div>
                }
            </div>

            <!-- Dirección -->
            <div class="col-lg-4">
                <div class="info-card">
                    <h2 class="info-card-title">
                        <i class="fa-solid fa-truck"></i>
                        Dirección de Envío
                    </h2>

                    <div class="address-box">
                        @if (dirUsada != null)
                        {
                            <div class="address-line">
                                <span class="address-label">Principal:</span>
                                <span>@Safe(dirUsada.Calle)</span>
                            </div>
                            @if (!string.IsNullOrWhiteSpace(linea2Usada))
                            {
                                <div class="address-line">@linea2Usada</div>
                            }
                            @if (!string.IsNullOrWhiteSpace(refUsada))
                            {
                                <div class="address-line">
                                    <span class="address-label">Ref:</span>
                                    <span>@refUsada</span>
                                </div>
                            }
                            @if (!string.IsNullOrWhiteSpace(telUsado))
                            {
                                <div class="address-line">
                                    <span class="address-label">Tel:</span>
                                    <span>@telUsado</span>
                                </div>
                            }
                            <div class="address-line text-muted">
                                <small>Registrada: @dirUsada.FechaRegistro.ToString("dd/MM/yyyy")</small>
                            </div>
                        }
                        else
                        {
                            <div class="address-line">
                                <span class="address-label">Principal:</span>
                                <span>Dirección del perfil</span>
                            </div>
                            @if (!string.IsNullOrWhiteSpace(calleUsada))
                            {
                                <div class="address-line">@calleUsada</div>
                            }
                            @if (!string.IsNullOrWhiteSpace(JoinNonEmpty(ciudadUsada, estadoUsado)))
                            {
                                <div class="address-line">@JoinNonEmpty(ciudadUsada, estadoUsado)</div>
                            }
                        }
                    </div>

                    @if (faltaCalle || faltaCiudad)
                    {
                        <div class="alert-warning">
                            <i class="fa-solid fa-exclamation-circle"></i>
                            <span>Falta información: @(faltaCalle ? "calle" : "") @((faltaCalle && faltaCiudad) ? " y " : "") @(faltaCiudad ? "ciudad" : "")</span>
                        </div>
                    }

                    <h3 class="section-title">
                        <i class="fa-solid fa-tag"></i>
                        Etiqueta de Envío
                    </h3>

                    <div class="copy-box">
                        <pre id="copyContent" class="copy-content">@etiquetaEnvio</pre>
                        <div class="d-flex gap-2">
                            <button class="btn-action btn-outline-action" id="btnCopy">
                                <i class="fa-solid fa-copy"></i>
                                Copiar
                            </button>
                            <button class="btn-action btn-outline-action" id="btnDownload">
                                <i class="fa-solid fa-download"></i>
                                Descargar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Productos -->
            <div class="col-lg-4">
                <div class="info-card">
                    <h2 class="info-card-title">
                        <i class="fa-solid fa-shopping-bag"></i>
                        Productos
                    </h2>

                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Cantidad</th>
                                <th>Precio</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.Detalles == null || !Model.Detalles.Any())
                            {
                                <tr>
                                    <td colspan="3" class="text-muted">Sin detalles</td>
                                </tr>
                            }
                            else
                            {
                                foreach (var d in Model.Detalles)
                                {
                                    <tr>
                                        <td>@d.Producto</td>
                                        <td>× @d.Cantidad</td>
                                        <td>@d.Subtotal.ToString("C", culture)</td>
                                    </tr>
                                }
                                <tr class="total-row">
                                    <td colspan="2">Total</td>
                                    <td>@Model.Total.ToString("C", culture)</td>
                                </tr>
                            }
                        </tbody>
                    </table>

                    <div class="mt-4 no-print">
                        <button class="btn-action btn-primary-action w-100" onclick="window.print()">
                            <i class="fa-solid fa-print"></i>
                            Imprimir
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Comprobante -->
@if (!string.IsNullOrWhiteSpace(compUrl) && !isPdf)
{
    <div class="modal fade" id="modalComprobante" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fa-solid fa-image me-2"></i>
                        Comprobante de Depósito
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="@compUrl" alt="Comprobante" class="img-fluid" />
                </div>
                <div class="modal-footer">
                    <a class="btn-action btn-outline-action" href="@compUrl" download>
                        <i class="fa-solid fa-download"></i>
                        Descargar
                    </a>
                    <button type="button" class="btn-action btn-primary-action" data-bs-dismiss="modal">
                        <i class="fa-solid fa-check"></i>
                        Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>
}

<!-- Modal Marcar como Enviado -->
<div class="modal fade" id="modalMarcarEnviado" tabindex="-1" aria-labelledby="modalMarcarEnviadoLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="modalMarcarEnviadoLabel">
                    <i class="fa-solid fa-truck-fast"></i>
                    Confirmar Envío
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <form id="formMarcarEnviado" method="post" asp-controller="Panel" asp-action="MarcarEnviada">
                @Html.AntiForgeryToken()
                <input type="hidden" name="id" value="@Model.VentaID" />
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fa-solid fa-circle-info"></i>
                        <strong>Importante:</strong> Esta acción marcará la venta como <strong>Enviada</strong>.
                    </div>

                    <p class="mb-3">
                        Venta: <strong>#@Model.VentaID - @Model.Nombre</strong>
                    </p>

                    <p class="text-muted mb-0">
                        <i class="fa-solid fa-exclamation-triangle"></i>
                        Una vez marcada como enviada, <strong>NO se podrá revertir</strong> a menos que uses la opción "Reportar Venta".
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fa-solid fa-xmark"></i>
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fa-solid fa-check"></i>
                        Sí, marcar como enviado
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal Reportar Venta -->
<div class="modal fade" id="modalReportar" tabindex="-1" aria-labelledby="modalReportarLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="modalReportarLabel">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    Reportar Venta
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <form id="formReportar" method="post" asp-controller="Panel" asp-action="ReportarVenta">
                @Html.AntiForgeryToken()
                <input type="hidden" name="ventaId" value="@Model.VentaID" />
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="fa-solid fa-circle-info"></i>
                        <strong>¡Atención!</strong> Esta acción:
                        <ul class="mb-0 mt-2">
                            <li>Repondrá el stock de los productos</li>
                            <li>Marcará la venta como <strong>Cancelada (revertida)</strong></li>
                            <li><strong>NO se puede deshacer</strong></li>
                        </ul>
                    </div>

                    <p class="mb-3">
                        Venta: <strong>#@Model.VentaID - @Model.Nombre</strong>
                    </p>

                    <div class="mb-3">
                        <label for="reportarMotivo" class="form-label">
                            <i class="fa-solid fa-list"></i>
                            Motivo de la reversión <span class="text-danger">*</span>
                        </label>
                        <select class="form-select" id="reportarMotivo" name="motivo" required>
                            <option value="">Selecciona un motivo...</option>
                            <option value="devolucion">Devolución del cliente</option>
                            <option value="deposito_falso">Depósito falso</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="reportarNota" class="form-label">
                            <i class="fa-solid fa-note-sticky"></i>
                            Nota adicional (opcional)
                        </label>
                        <textarea class="form-control" id="reportarNota" name="nota" rows="3"
                                  placeholder="Explica brevemente el problema..."></textarea>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="reportarConfirm" required>
                        <label class="form-check-label" for="reportarConfirm">
                            <strong>Confirmo que quiero revertir esta venta</strong>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fa-solid fa-xmark"></i>
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-danger">
                        <i class="fa-solid fa-flag"></i>
                        Confirmar Reversión
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>


@section Scripts {
    <script src="~/js/VentaDetalle.js" asp-append-version="true"></script>
}
