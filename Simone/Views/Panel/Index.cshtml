@model Usuario
@{
    ViewData["Title"] = "Panel de Control";

    var bancosAdminCount = ViewBag.BancosAdminCount as int? ?? -1;
    var bancosProvCount = ViewBag.BancosProvCount as int? ?? -1;

    var isAdmin = User.IsInRole("Administrador");
    var isVendedor = User.IsInRole("Vendedor");
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    :root {
        --primary-dark: #1A1A1A;
        --primary-light: #fff;
        --accent-purple: #4B0082;
        --accent-gold: #D4AF37;
        --light-gray: #F8F8F8;
        --medium-gray: #E0E0E0;
        --dark-gray: #333;
        --text-color: #333;
        --text-light: #777;
        --success: #28a745;
        --danger: #dc3545;
        --warning: #ffc107;
        --info: #17a2b8;
    }

    body {
        font-family: 'Montserrat',sans-serif;
        background: #f5f5f7;
        color: var(--text-color)
    }

    .dashboard-container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 15px
    }

    .dashboard-header {
        background: linear-gradient(135deg,var(--accent-purple),#2E0854);
        color: #fff;
        padding: 2rem;
        border-radius: 12px 12px 0 0;
        margin-bottom: 0
    }

    .dashboard-title {
        font-size: 2rem;
        margin-bottom: .5rem;
        display: flex;
        align-items: center
    }

    .dashboard-subtitle {
        font-size: 1rem;
        opacity: .9;
        margin-bottom: 0
    }

    .dashboard-content {
        background: #fff;
        border-radius: 0 0 12px 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,.08);
        padding: 2rem
    }

    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill,minmax(350px,1fr));
        gap: 1.5rem
    }

    .dashboard-card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,.08);
        padding: 1.5rem;
        transition: .3s;
        border-left: 4px solid var(--accent-purple);
        display: flex;
        flex-direction: column;
        height: 100%
    }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,.15);
            border-left-color: var(--accent-gold)
        }

    .card-header {
        display: flex;
        align-items: flex-start;
        margin-bottom: 1rem
    }

    .card-icon {
        font-size: 1.5rem;
        color: var(--accent-purple);
        margin-right: 1rem;
        flex-shrink: 0
    }

    .card-title {
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: .25rem;
        color: var(--dark-gray)
    }

    .card-subtitle {
        font-size: .9rem;
        color: var(--text-light);
        margin-bottom: 0
    }

    .card-body {
        flex-grow: 1;
        margin-bottom: 1.5rem
    }

    .card-description {
        font-size: .95rem;
        color: var(--text-color);
        line-height: 1.5
    }

    .card-footer {
        margin-top: auto
    }

    .card-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: .5rem 1.25rem;
        border-radius: 30px;
        font-weight: 500;
        font-size: .9rem;
        transition: .3s;
        text-decoration: none
    }

    .btn-primary {
        background: var(--accent-purple);
        color: #fff
    }

        .btn-primary:hover {
            background: #5E2D8C
        }

    .btn-success {
        background: var(--success);
        color: #fff
    }

        .btn-success:hover {
            background: #218838
        }

    .btn-warning {
        background: var(--warning);
        color: var(--primary-dark)
    }

        .btn-warning:hover {
            background: #e0a800
        }

    .btn-info {
        background: var(--info);
        color: #fff
    }

        .btn-info:hover {
            background: #138496
        }

    .chip {
        display: inline-block;
        padding: .25rem .5rem;
        font-size: .75rem;
        border-radius: 999px;
        background: #f2f2f7;
        color: #333;
        margin-left: .5rem
    }

    @@media (max-width:992px) {
        .dashboard-grid {
            grid-template-columns: repeat(auto-fill,minmax(300px,1fr))
        }
    }

    @@media (max-width:768px) {
        .dashboard-header {
            padding: 1.5rem
        }

        .dashboard-content {
            padding: 1.5rem
        }

        .dashboard-title {
            font-size: 1.75rem
        }
    }

    @@media (max-width:576px) {
        .dashboard-grid {
            grid-template-columns: 1fr
        }

        .dashboard-title {
            font-size: 1.5rem
        }

        .dashboard-subtitle {
            font-size: .9rem
        }
    }
</style>

<div class="dashboard-container">
    <div class="dashboard-header">
        <h1 class="dashboard-title"><i class="fas fa-cog me-3"></i> @ViewData["Title"]</h1>
        <p class="dashboard-subtitle">Gesti칩n central del sistema y m칩dulos disponibles</p>
    </div>

    <div class="dashboard-content">
        <div class="dashboard-grid">

            @if (isAdmin)
            {
                <!-- (ADMIN) Usuarios -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-users"></i></div>
                        <div>
                            <h3 class="card-title">Usuarios</h3>
                            <p class="card-subtitle">Gesti칩n de cuentas</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Administra usuarios registrados, roles y acceso al sistema.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-primary" asp-controller="Panel" asp-action="Usuarios">
                            <i class="fas fa-eye me-2"></i> Ver Usuarios
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Productos -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-boxes"></i></div>
                        <div>
                            <h3 class="card-title">Productos</h3>
                            <p class="card-subtitle">Inventario</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Administra el cat치logo de productos, modifica stock o edita detalles.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-info" asp-controller="Panel" asp-action="Productos">
                            <i class="fas fa-boxes me-2"></i> Ver Productos
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Categor칤as -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-folder"></i></div>
                        <div>
                            <h3 class="card-title">Categor칤as</h3>
                            <p class="card-subtitle">Gesti칩n de productos</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Crea y organiza las categor칤as del inventario de productos.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-success" asp-controller="Panel" asp-action="Categorias">
                            <i class="fas fa-folder me-2"></i> Ver Categor칤as
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Subcategor칤as -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-tags"></i></div>
                        <div>
                            <h3 class="card-title">Subcategor칤as</h3>
                            <p class="card-subtitle">Organizaci칩n detallada</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Administra las subcategor칤as para una mejor organizaci칩n del inventario.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-warning" asp-controller="Panel" asp-action="Subcategorias">
                            <i class="fas fa-tags me-2"></i> Ver Subcategor칤as
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Proveedores -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-truck"></i></div>
                        <div>
                            <h3 class="card-title">Proveedores</h3>
                            <p class="card-subtitle">Abastecimiento</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Gestiona empresas proveedoras y contactos comerciales.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-warning" asp-controller="Panel" asp-action="Proveedores">
                            <i class="fas fa-truck me-2"></i> Ver Proveedores
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Bancos -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-university"></i></div>
                        <div>
                            <h3 class="card-title">
                                Cuentas Bancarias (Admin)
                                @if (bancosAdminCount >= 0)
                                {
                                    <span class="chip">Activas: <strong>@bancosAdminCount</strong></span>
                                }
                            </h3>
                            <p class="card-subtitle">Dep칩sitos / transferencias</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Define las cuentas bancarias del <strong>administrador</strong> para pagos centralizados.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-primary" asp-controller="AdminBancos" asp-action="Index">
                            <i class="fas fa-university me-2"></i> Configurar Bancos
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Logs -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-clock"></i></div>
                        <div>
                            <h3 class="card-title">Registros</h3>
                            <p class="card-subtitle">Auditor칤a</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Revisa los logs de actividad del sistema.</p>
                    </div>
                    <div class="card-footer">
                        <a href="/Logs" class="card-btn btn-primary">
                            <i class="fas fa-clock me-2"></i> Ver Logs
                        </a>
                    </div>
                </div>

                <!-- (ADMIN) Reportes -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-chart-bar"></i></div>
                        <div>
                            <h3 class="card-title">Reportes</h3>
                            <p class="card-subtitle">Estad칤sticas</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Consulta reportes de ventas, inventario y m칠tricas.</p>
                    </div>
                    <div class="card-footer">
                        <a href="@Url.Action("Reportes", "Panel")" class="card-btn btn-success">
                            <i class="fas fa-chart-bar me-2"></i> Ver Reportes
                        </a>
                    </div>
                </div>
            }
            else if (isVendedor)
            {
                <!-- (VENDEDOR) Productos -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-boxes"></i></div>
                        <div>
                            <h3 class="card-title">Productos</h3>
                            <p class="card-subtitle">Inventario</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Consulta y gestiona el cat치logo de productos disponibles.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-info" asp-controller="Panel" asp-action="Productos">
                            <i class="fas fa-boxes me-2"></i> Ver Productos
                        </a>
                    </div>
                </div>

                <!-- (VENDEDOR) Mis Subcategor칤as -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-tags"></i></div>
                        <div>
                            <h3 class="card-title">Mis Subcategor칤as</h3>
                            <p class="card-subtitle">Organizaci칩n de mi tienda</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">
                            Crea y administra subcategor칤as <strong>solo de tu tienda</strong>.
                            Se validan duplicados por <em>(vendedor, categor칤a, nombre)</em>.
                        </p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-warning" asp-controller="Panel" asp-action="Subcategorias">
                            <i class="fas fa-tags me-2"></i> Ver Subcategor칤as
                        </a>
                    </div>
                </div>

                <!-- (VENDEDOR) Reportes -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-chart-bar"></i></div>
                        <div>
                            <h3 class="card-title">Reportes</h3>
                            <p class="card-subtitle">Mis ventas</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Consulta tus ventas y totales correspondientes <strong>solo a tus productos</strong>.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-success" asp-controller="Vendedor" asp-action="Reportes">
                            <i class="fas fa-chart-bar me-2"></i> Ver Reportes
                        </a>
                    </div>
                </div>

                <!-- (VENDEDOR) Mis Cuentas Bancarias -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-university"></i></div>
                        <div>
                            <h3 class="card-title">
                                Mis Cuentas Bancarias
                                @if (bancosProvCount >= 0)
                                {
                                    <span class="chip">Activas: <strong>@bancosProvCount</strong></span>
                                }
                            </h3>
                            <p class="card-subtitle">Pago directo a mi tienda</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Registra las cuentas bancarias de tu tienda. Se mostrar치n cuando el carrito contenga <strong>solo productos tuyos</strong>.</p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-primary" asp-controller="Vendedor" asp-action="Bancos">
                            <i class="fas fa-university me-2"></i> Configurar Bancos
                        </a>
                    </div>
                </div>

                <!-- (VENDEDOR) Tarifas de Env칤o)  游녣 NUEVO -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fa-solid fa-truck-fast"></i></div>
                        <div>
                            <h3 class="card-title">Tarifas de Env칤o</h3>
                            <p class="card-subtitle">Por provincia / ciudad</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-description">
                            Define el costo de env칤o seg칰n el destino. Puedes crear reglas por <strong>provincia</strong>
                            completa o espec칤ficas por <strong>ciudad</strong>. Prioridad: Ciudad &gt; Provincia.
                        </p>
                    </div>
                    <div class="card-footer">
                        <a class="card-btn btn-primary" asp-controller="Vendedor" asp-action="Envios">
                            <i class="fa-solid fa-truck-fast me-2"></i> Configurar Env칤os
                        </a>
                    </div>
                </div>
            }

        </div>
    </div>
</div>
