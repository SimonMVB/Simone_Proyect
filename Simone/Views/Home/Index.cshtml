@model IEnumerable<Simone.Models.Producto>
@using System.Globalization
@{
    ViewData["Title"] = "Inicio";
    var culture = new CultureInfo("es-EC");
}

<!-- Banner principal -->
<div class="container-fluid px-0">
    <div id="homeCarousel" class="carousel slide" data-bs-ride="carousel" aria-label="Promociones principales">
        <div class="carousel-inner">
            <div class="carousel-item active position-relative">
                <img src="~/images/Home/vestidos_home.jpg"
                     asp-append-version="true"
                     class="d-block w-100 banner-img"
                     alt="Colección de vestidos"
                     fetchpriority="high"
                     decoding="async" />
                <div class="carousel-caption d-flex flex-column justify-content-center align-items-center h-100">
                    <h1 class="display-4 fw-bold text-white text-shadow mb-3">
                        Descubre Nuestra Colección de Vestidos
                    </h1>
                    <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Vestidos"
                       class="btn btn-lg btn-light shadow"
                       aria-label="Ver vestidos">
                        Ver vestidos
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Promoción destacada -->
<div class="container-fluid text-white text-center py-5"
     style="background: linear-gradient(135deg, #000000, #1a1a1a); animation: fadeIn .9s ease-in;">
    <div class="container py-4">
        <h2 class="fw-bold mb-2">Body's irresistibles</h2>
        <p class="lead mb-4">¡Llévate el segundo body con <span class="text-warning">envío gratis</span>!</p>
        <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Body's" class="btn btn-warning btn-lg px-4 shadow-sm">
            <i class="fa-solid fa-bag-shopping me-2"></i> Comprar ahora
        </a>
    </div>
</div>

<!-- Categorías rápidas -->
<section class="container my-5">
    <div class="d-flex justify-content-between align-items-end mb-3">
        <h3 class="fw-bold m-0">Explora por categoría</h3>
    </div>

    <div class="row g-3 g-lg-4">
        <!-- Nota: verifica que los nombres de archivos y acciones coincidan EXACTO en mayúsculas/minúsculas -->
        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Blusas" class="cat-card">
                <img src="~/images/Categorias_slider/blusas.png" asp-append-version="true"
                     class="cat-img" alt="Blusas" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Blusas</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Tops" class="cat-card">
                <img src="~/images/Categorias_slider/tops.png" asp-append-version="true"
                     class="cat-img" alt="Tops" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Tops</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Body's" class="cat-card">
                <img src="~/images/Categorias_slider/Bodys.png" asp-append-version="true"
                     class="cat-img" alt="Body's" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Body's</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <!-- Trajes de Baño -->
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Trajes de Baño" class="cat-card">
                <img src="~/images/Categorias_slider/Traje_de_bano.png" asp-append-version="true"
                     class="cat-img" alt="Trajes de baño" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Trajes de Baño</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Conjuntos" class="cat-card">
                <img src="~/images/Categorias_slider/conjuntos.png" asp-append-version="true"
                     class="cat-img" alt="Conjuntos" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Conjuntos</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Vestidos" class="cat-card">
                <img src="~/images/Categorias_slider/vestidos.png" asp-append-version="true"
                     class="cat-img" alt="Vestidos" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Vestidos</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Faldas" class="cat-card">
                <img src="~/images/Categorias_slider/faldas.png" asp-append-version="true"
                     class="cat-img" alt="Faldas" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Faldas</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Pantalones" class="cat-card">
                <img src="~/images/Categorias_slider/Pantalones.png" asp-append-version="true"
                     class="cat-img" alt="Pantalones" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Pantalones</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Jeans" class="cat-card">
                <img src="~/images/Categorias_slider/Jeans.png" asp-append-version="true"
                     class="cat-img" alt="Jeans" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Jeans</span>
            </a>
        </div>

        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <a asp-controller="Compras" asp-action="Catalogo" asp-route-categoria="Bolsas" class="cat-card">
                <img src="~/images/Categorias_slider/bolsas.png" asp-append-version="true"
                     class="cat-img" alt="Bolsas" loading="lazy" decoding="async"
                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';">
                <span class="cat-title">Bolsas</span>
            </a>
        </div>
    </div>
</section>

<!-- Productos destacados -->
<section class="container mb-5">
    <div class="d-flex justify-content-between align-items-end mb-3">
        <h3 class="fw-bold m-0">Destacados</h3>
        <a asp-controller="Compras" asp-action="Catalogo" class="btn btn-outline-dark btn-sm">
            Ver catálogo
        </a>
    </div>

    @if (Model == null || !Model.Any())
    {
        <div class="text-center text-muted py-5">
            <i class="fa-regular fa-face-smile-beam fa-2x mb-2"></i>
            <p class="m-0">Pronto añadiremos productos destacados.</p>
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var producto in Model)
            {
                var agotado = producto.Stock <= 0;
                <div class="col-6 col-md-4 col-lg-3 mb-4">
                    <article class="card product-card h-100 border-0 shadow-sm">
                        <div class="position-relative">
                            <a asp-controller="Compras" asp-action="VerProducto" asp-route-productoID="@producto.ProductoID">
                                <img src="@(string.IsNullOrWhiteSpace(producto.ImagenPath) ? Url.Content("~/images/Categorias_slider/ver_todo.png") : producto.ImagenPath)"
                                     asp-append-version="true"
                                     alt="@producto.Nombre"
                                     class="card-img-top product-img"
                                     loading="lazy" decoding="async"
                                     onerror="this.onerror=null;this.src='/images/Categorias_slider/ver_todo.png';" />
                            </a>
                            @if (agotado)
                            {
                                <span class="badge bg-danger position-absolute top-0 start-0 m-2">Sin stock</span>
                            }
                        </div>
                        <div class="card-body text-center">
                            <h6 class="card-title text-truncate mb-1" title="@producto.Nombre">@producto.Nombre</h6>
                            <div class="fw-bold">@producto.PrecioVenta.ToString("C", culture)</div>
                            <a asp-controller="Compras" asp-action="VerProducto" asp-route-productoID="@producto.ProductoID"
                               class="btn btn-dark btn-sm mt-2">
                                <i class="fa-solid fa-eye me-2"></i> Ver detalle
                            </a>
                        </div>
                    </article>
                </div>
            }
        </div>
    }
</section>

<!-- Estilos -->
<style>
    /* Razor: usa @@ para literales CSS at-rules */
    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .banner-img {
        height: 520px;
        object-fit: cover;
        filter: brightness(75%);
    }

    .text-shadow {
        text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
    }

    /* Categorías */
    .cat-card {
        display: block;
        text-decoration: none;
        color: inherit;
        text-align: center;
        transition: transform .15s ease, box-shadow .15s ease;
    }

        .cat-card:hover {
            transform: translateY(-2px);
        }

    .cat-img {
        width: 100%;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        border-radius: 12px;
        box-shadow: 0 4px 18px rgba(0,0,0,.08);
    }

    .cat-title {
        display: block;
        margin-top: .5rem;
        font-weight: 600;
    }

    /* Productos */
    .product-img {
        height: 240px;
        object-fit: cover;
        border-top-left-radius: .5rem;
        border-top-right-radius: .5rem;
    }

    .product-card:hover {
        box-shadow: 0 10px 28px rgba(0,0,0,.12);
    }

    /* Respeta usuarios con “reduced motion” */
    @@media (prefers-reduced-motion: reduce) {
        .banner-img {
            filter: brightness(75%);
        }

        .cat-card, .product-card {
            transition: none;
        }
    }
</style>
