<!-- ✅ jQuery completo -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<!-- ✅ Semantic UI CSS -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css"></noscript>

<!-- ✅ jQuery Validation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"
        integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA=="
        crossorigin="anonymous"></script>

<!-- ✅ jQuery Unobtrusive -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"
        integrity="sha512-o6XqxgrUsKmchwy9G5VRNWSSxTS4Urr4loO6/0hYdpWmFUfHqGzawGxeQGMDqYzxjY9sbktPbNlkIQJWagVZQg=="
        crossorigin="anonymous"></script>

<!-- ✅ Semantic UI JS (sin integrity) -->
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.js" defer></script>

<!-- ✅ Inicialización -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const initFormValidation = function () {
            var $form = $('form');
            if ($form.length) {
                $form.removeData('validator')
                     .removeData('unobtrusiveValidation');
                $.validator.unobtrusive.parse($form);

                $.validator.setDefaults({
                    errorClass: 'ui pointing red basic label',
                    highlight: function (element) {
                        $(element).closest('.field').addClass('error');
                    },
                    unhighlight: function (element) {
                        $(element).closest('.field').removeClass('error');
                    },
                    errorPlacement: function (error, element) {
                        if (element.parent('.input-group').length) {
                            error.insertAfter(element.parent());
                        } else {
                            error.insertAfter(element);
                        }
                    }
                });
            }
        };

        initFormValidation();

        // Rehabilita ajaxComplete gracias a jQuery full
        $(document).ajaxComplete(function () {
            initFormValidation();
        });
    });
</script>
